<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Talk</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/simple-grid.css">
    <link href="./css/all.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
  </head>
  <body>


    <div class="row">
      <div class="topnav">
        <a href="#ayy"><i class="fas fa-comment-alt"></i></a>
        <a href="#ayy"><i class="fas fa-cog"></i></a>
        <a href="#ayy"><i class="fas fa-phone-alt"></i></a>
        <a href="#ayy"><i class="fas fa-video"></i></a>
        <a href="#ayy"><i class="fas fa-desktop"></i></a>
        <a href="#ayy"><i class="fas fa-user-edit"></i></a>
        <a href="#ayy"><i class="fas fa-sign-out-alt"></i></a>
      </div>
    </div>


    <div class="row">
      <div class="col-12">
        <form class="" onsubmit="LoginUser()">
          <input id="username" type="text" name="username" value="">
          <input id="password" type="password" name="password" value="">
          <input type="submit" value="Login">
        </form>
      </div>
    </div>

    <div class="row talk">
      <div class="col-8">

        <div class="messageHolder">

          <div class="messageBox">
            <div class="author">
              SpaceDux
              <i class="fas fa-crown get-away"></i>
            </div>
            Messages here. (CHANNEL BASED???)
          </div>

          <div class="messageBox">
            <div class="author">
              Noisy
            </div>
            I'm just a poor boy, nobody loves me.
          </div>

          <div class="messageBox">
            <div class="author">
              Cas
            </div>
            Have you heard about our lord and savour dotnet?
          </div>
        </div>


        <div class="talkyPart">
          <textarea class="talkyBoxInput" id="messageInput" name="MessageBox" rows="2" cols="80" placeholder="Hi, im sid the sloth."></textarea>
          <button class="chatButton"><i class="fas fa-camera"></i></button>
          <button class="chatButton"><i class="fas fa-smile"></i></button>
          <button class="chatButton"><i class="fas fa-poop"></i></button>
        </div>
      </div>
      <div class="col-4">
        <div class="voiceChannels">
          <div class="channel">
            <div class="channelTitle">
              Juan
            </div>
            <div class="channelDescription">
              Main landing channel, open to all.
            </div>
            <hr>
            <div class="channelPeople">
              <div class="circle one">
              </div>
              <div class="circle two">
              </div>
              <div class="circle three">
              </div>
              <div class="circle four">
              </div>
              <div class="circle five">
              </div>
            </div>



          </div>
          <div class="channel">
            <div class="channelTitle">
              Dos
            </div>
            <div class="channelDescription">
              Shot the sheriff.
            </div>
          </div>          <div class="channel">
            <div class="channelTitle">
              Tres
            </div>
            <div class="channelDescription">
              Random hobby stuff.
            </div>
          </div>          <div class="channel">
            <div class="channelTitle">
              Audi Quattro
            </div>
            <div class="channelDescription">
              Vroooom. VROOM. Vroo---ooom.
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./loader.js"></script>
    <script type="text/javascript">
      document.querySelector('#messageInput').addEventListener('keypress', function (e) {
          if (e.key === 'Enter' && e.shiftKey == false) {
            let val = document.querySelector('#messageInput').value;
            if(val !== '' && val !== ' ' && val !== '\n') {
              messaging_class.SendMessage(val, 1)
              .then(() => {
                document.querySelector('#messageInput').value = '';

              })
            }
            document.querySelector('#messageInput').value = '';
          }
      });

      function LoginUser() {
        event.preventDefault();
        let username = document.querySelector('#username').value;
        let password = document.querySelector('#password').value;

        users_class.Login(username, password)
        .then((result) => {
          alert(result.Message);
        })
      }
    </script>
  </body>
</html>
